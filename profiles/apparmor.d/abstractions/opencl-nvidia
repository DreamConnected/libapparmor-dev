# vim:syntax=apparmor
# OpenCL access requirements for NVIDIA implementation

  #include <abstractions/nvidia>
  #include <abstractions/opencl-common>

  # Executables

  /usr/bin/nvidia-modprobe PUx,

  # System files

  # libnvidia-opencl.so rules:
  /dev/nvidia-uvm rw,
  /dev/nvidia-uvm-tools rw,
  /sys/devices/pci[0-9]*/**/config r,
  /sys/devices/system/memory/block_size_bytes r,
  /usr/share/nvidia/** r,
  @{PROC}/devices r,
  @{PROC}/sys/vm/mmap_min_addr r,

  # User files

  owner @{HOME}/.nv/ComputeCache/ w,
  owner @{HOME}/.nv/ComputeCache/** rw,
  owner @{HOME}/.nv/ComputeCache/index rwk,

